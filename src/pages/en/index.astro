---
import Toggle from "../../components/Toggle.astro";
import Introduction from "../sections/Introduction.astro";
import Skills from "../sections/Skills.astro";
import Experience from "../sections/Experience.astro";
import Studies from "../sections/Studies.astro";
import Projects from "../sections/Projects.astro";
import Footer from "../../components/Footer.astro";
import i18next, { t, changeLanguage } from "i18next";
import { LanguageSelector, HeadHrefLangs } from "astro-i18next/components";

changeLanguage("en");
---

<!doctype html>
<html lang={i18next.language}>
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content="Portfolio de Josué García Asensi" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>Josué García Asensi</title>
    <!-- Bootstrap Font Icon CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <HeadHrefLangs />
  </head>
  <body class="bg-slate-100 dark:bg-slate-800 text-black dark:text-white">
    <header class="flex justify-between items-center">
      <h1 class="text-3xl font-bold">JGA</h1>
      <div>
        <Toggle />
        <LanguageSelector showFlag={true} class="bg-white dark:bg-slate-800" />
      </div>
    </header>
    <main>
      <Introduction />
      <hr class="my-12 h-0.5 border-t-0 bg-black dark:bg-gray-400" />
      <Skills />
      <Experience />
      <Studies />      
      <Projects />
    </main>

    <div
      id="scroll-progress"
      class="bg-blue-600 dark:bg-blue-500 h-1 fixed top-0 left-0 z-50">
    </div>
  </body>
  <Footer />
</html>

<style>
  body {
    margin: auto;
    padding: 1rem;
    width: 800px;
    max-width: calc(100% - 2rem);
    font-size: 20px;
    line-height: 1.6;
  }
</style>

<script type="module">
  window.addEventListener("scroll", function () {
    const scrollableHeight =
      document.documentElement.scrollHeight - window.innerHeight;
    const scrolled = window.scrollY;
    const progressBar = document.getElementById("scroll-progress");
    const progress = (scrolled / scrollableHeight) * 100;
    progressBar.style.width = progress + "%";
  });
</script>